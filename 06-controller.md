[<< Маршрутизатор](05-router.md) | [Инверсия управления >>](07-inversion-of-control.md)

### Контроллер

В данном туториале мы не будем реализовывать [MVC (Model-View-Controller)](http://martinfowler.com/eaaCatalog/modelViewController.html). В любом случае MVC не может быть правильно реализована в PHP, по крайней мере, в том виде в котором он изначально задумывался. Если вы хотите узнать подробднее об этом, рекомендую прочесть [A Beginner's Guide To MVC](http://blog.ircmaxell.com/2014/11/a-beginners-guide-to-mvc-for-web.html) вместе с последующими постами. Так что давайте отложим MVC и вместо этого сконцентрируемся на [разделении ответственности](https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8).

Нам нужно дать имя классам, которые будут обрабатывать запросы. В данном туториале я буду называть их `Контроллеры (Controllers)`. Так будет удобно для читателей которые имеют опыт работы с фреймворками. Также вы можете назвать их `Обработчики (Handlers)`.

Создайте новую папку `Controllers` внутри `src/`. В данной директрии мы будем хранить классы контроллеров. Давайте создадим файл `Homepage.php` и наполним его содержимым: 

```php
<?php declare(strict_types = 1);

namespace Example\Controllers;

class Homepage
{
    public function show()
    {
        echo 'Hello World';
    }
}
```

Автозагрузчик будет работать только в том случае, если пространство имен класса соответствует пути к текущему файлу и имя класса идентично имени файла. Вначале мы определили `Example` как корневое пространсво имен, которое ссылается на директорию `src/`.

Давайте изменим созданный ранее `/hello-world` маршрут:

```php
return [
    ['GET', '/', ['Example\Controllers\Homepage', 'show']],
];
```

Теперь вместо функции мы передаем массив. Первый элемент массива, это полный путь к контроллеру, второй элемент - метод этого контроллера, который будет вызываться для обработки запроса. 

Давайте немного порефакторим `Bootstrap.php`:

```php
case \FastRoute\Dispatcher::FOUND:
    $className = $routeInfo[1][0];
    $method = $routeInfo[1][1];
    $vars = $routeInfo[2];
    
    $class = new $className;
    $class->$method($vars);
    break;
```

Теперь вместо обычного вызова функции мы создаем объект контроллера и вызываем обработчик из данного экземпляра класса.

Давайте перейдем по ссылке `http://localhost:8000/`, и убедимся в том, что все осталось на своих местах.

[<< Маршрутизатор](05-router.md) | [Инверсия управления >>](07-inversion-of-control.md)
